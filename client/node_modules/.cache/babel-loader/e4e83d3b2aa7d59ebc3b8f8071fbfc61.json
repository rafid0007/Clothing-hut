{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\react-commerce\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _objectSpread from\"E:\\\\react-commerce\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"E:\\\\react-commerce\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import React,{useEffect}from\"react\";import{Switch,Route,Redirect}from\"react-router-dom\";import{connect}from\"react-redux\";import{createStructuredSelector}from\"reselect\";import HomePage from\"./pages/homepage/homepage.component\";import ShopPage from\"./pages/shop/shop.component\";import Header from\"./components/header/header.component\";import Checkout from\"./pages/checkout/checkout.comp\";import SignInUp from\"./pages/sign-in-up/sign-in-up.component\";import{auth,createUserProfileDocument}from\"./firebase/firebase.utils\";import{setCurrentUser as _setCurrentUser}from\"./redux/user/user.action\";import{selectCurrentUser}from\"./redux/user/user.selectors\";import\"./App.css\";var App=function App(_ref){var currentUser=_ref.currentUser,setCurrentUser=_ref.setCurrentUser;//    unsubscribeFromAuth = null;\n//\n// componentDidMount() {\n//     const {setCurrentUser, collectionsArray} = this.props;\n//     this.unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\n//         if (userAuth) {\n//             const userRef = await createUserProfileDocument(userAuth);\n//\n//             userRef.onSnapshot(snapshot => {\n//                 setCurrentUser(\n//                     {\n//                        id: snapshot.id,\n//                        ...snapshot.data()\n//                     }\n//                     );\n//             })\n//         } else {\n//             setCurrentUser(userAuth)\n//         }\n//     });\n// }\n//\n//    componentWillUnmount() {\n//      this.unsubscribeFromAuth();\n//  }\nuseEffect(function(){console.log('UseEffect Fired!!!');auth.onAuthStateChanged(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userAuth){var userRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!userAuth){_context.next=7;break;}_context.next=3;return createUserProfileDocument(userAuth);case 3:userRef=_context.sent;userRef.onSnapshot(function(snapshot){setCurrentUser(_objectSpread({id:snapshot.id},snapshot.data()));});_context.next=8;break;case 7:setCurrentUser(userAuth);case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());},[setCurrentUser]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\",component:HomePage}),/*#__PURE__*/React.createElement(Route,{path:\"/shop\",component:ShopPage}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/checkout\",component:Checkout}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/sign-in\",render:function render(){return currentUser?/*#__PURE__*/React.createElement(Redirect,{to:\"/\"}):/*#__PURE__*/React.createElement(SignInUp,null);}})));};var mapStateToProps=createStructuredSelector({currentUser:selectCurrentUser});var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setCurrentUser:function setCurrentUser(user){return dispatch(_setCurrentUser(user));}};};export default connect(mapStateToProps,mapDispatchToProps)(App);","map":{"version":3,"sources":["E:/react-commerce/client/src/App.js"],"names":["React","useEffect","Switch","Route","Redirect","connect","createStructuredSelector","HomePage","ShopPage","Header","Checkout","SignInUp","auth","createUserProfileDocument","setCurrentUser","selectCurrentUser","App","currentUser","console","log","onAuthStateChanged","userAuth","userRef","onSnapshot","snapshot","id","data","mapStateToProps","mapDispatchToProps","dispatch","user"],"mappings":"8bAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,MAAT,CAAiBC,KAAjB,CAAwBC,QAAxB,KAAwC,kBAAxC,CACA,OAAQC,OAAR,KAAsB,aAAtB,CACA,OAAQC,wBAAR,KAAuC,UAAvC,CAEA,MAAOC,CAAAA,QAAP,KAAqB,qCAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,6BAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sCAAnB,CACA,MAAOC,CAAAA,QAAP,KAAqB,gCAArB,CAEA,MAAOC,CAAAA,QAAP,KAAqB,yCAArB,CACA,OAASC,IAAT,CAAeC,yBAAf,KAAgD,2BAAhD,CACA,OAAQC,cAAc,GAAdA,CAAAA,eAAR,KAA6B,0BAA7B,CACA,OAAQC,iBAAR,KAAgC,6BAAhC,CAEA,MAAO,WAAP,CAEA,GAAMC,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,MAAmC,IAAjCC,CAAAA,WAAiC,MAAjCA,WAAiC,CAApBH,cAAoB,MAApBA,cAAoB,CAE9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEGb,SAAS,CAAC,UAAM,CACZiB,OAAO,CAACC,GAAR,CAAY,oBAAZ,EACAP,IAAI,CAACQ,kBAAL,2FAAwB,iBAAMC,QAAN,kIACnBA,QADmB,+CAEGR,CAAAA,yBAAyB,CAACQ,QAAD,CAF5B,QAEbC,OAFa,eAInBA,OAAO,CAACC,UAAR,CAAmB,SAAAC,QAAQ,CAAI,CAC3BV,cAAc,gBAEPW,EAAE,CAAED,QAAQ,CAACC,EAFN,EAGJD,QAAQ,CAACE,IAAT,EAHI,EAAd,CAMH,CAPD,EAJmB,6BAanBZ,cAAc,CAACO,QAAD,CAAd,CAbmB,sDAAxB,iEAgBH,CAlBQ,CAkBP,CAACP,cAAD,CAlBO,CAAT,CAoBA,mBACE,4CACE,oBAAC,MAAD,MADF,cAEE,oBAAC,MAAD,mBACE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,CAAsB,SAAS,CAAEP,QAAjC,EADF,cAEE,oBAAC,KAAD,EAAO,IAAI,CAAC,OAAZ,CAAoB,SAAS,CAAEC,QAA/B,EAFF,cAGE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,WAAlB,CAA8B,SAAS,CAAEE,QAAzC,EAHF,cAIE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,UAAlB,CAA6B,MAAM,CAAE,wBAAMO,CAAAA,WAAW,cAAI,oBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAJ,cAAyB,oBAAC,QAAD,MAA1C,EAArC,EAJF,CAFF,CADF,CAWH,CA3DD,CA6DA,GAAMU,CAAAA,eAAe,CAAGrB,wBAAwB,CAAC,CAC7CW,WAAW,CAAEF,iBADgC,CAAD,CAAhD,CAIA,GAAMa,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,QAAK,CACpCf,cAAc,CAAE,wBAAAgB,IAAI,QAAID,CAAAA,QAAQ,CAACf,eAAc,CAACgB,IAAD,CAAf,CAAZ,EADgB,CAAL,EAAnC,CAIA,cAAezB,CAAAA,OAAO,CAACsB,eAAD,CAAkBC,kBAAlB,CAAP,CAA6CZ,GAA7C,CAAf","sourcesContent":["import React, { useEffect } from \"react\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\nimport {connect} from \"react-redux\";\nimport {createStructuredSelector} from \"reselect\";\n\nimport HomePage from \"./pages/homepage/homepage.component\";\nimport ShopPage from \"./pages/shop/shop.component\";\nimport Header from \"./components/header/header.component\";\nimport Checkout from \"./pages/checkout/checkout.comp\";\n\nimport SignInUp from \"./pages/sign-in-up/sign-in-up.component\";\nimport { auth, createUserProfileDocument } from \"./firebase/firebase.utils\";\nimport {setCurrentUser} from \"./redux/user/user.action\";\nimport {selectCurrentUser} from \"./redux/user/user.selectors\";\n\nimport \"./App.css\";\n\nconst App = ({currentUser, setCurrentUser}) => {\n\n //    unsubscribeFromAuth = null;\n //\n // componentDidMount() {\n //     const {setCurrentUser, collectionsArray} = this.props;\n //     this.unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\n //         if (userAuth) {\n //             const userRef = await createUserProfileDocument(userAuth);\n //\n //             userRef.onSnapshot(snapshot => {\n //                 setCurrentUser(\n //                     {\n //                        id: snapshot.id,\n //                        ...snapshot.data()\n //                     }\n //                     );\n //             })\n //         } else {\n //             setCurrentUser(userAuth)\n //         }\n //     });\n // }\n //\n //    componentWillUnmount() {\n //      this.unsubscribeFromAuth();\n //  }\n\n    useEffect(() => {\n        console.log('UseEffect Fired!!!');\n        auth.onAuthStateChanged(async userAuth => {\n         if (userAuth) {\n             const userRef = await createUserProfileDocument(userAuth);\n\n             userRef.onSnapshot(snapshot => {\n                 setCurrentUser(\n                     {\n                        id: snapshot.id,\n                        ...snapshot.data()\n                     }\n                     );\n             })\n         } else {\n             setCurrentUser(userAuth)\n         }\n     });\n    },[setCurrentUser]);\n\n    return (\n      <div>\n        <Header/>\n        <Switch>\n          <Route exact path=\"/\" component={HomePage} />\n          <Route path=\"/shop\" component={ShopPage} />\n          <Route exact path='/checkout' component={Checkout}/>\n          <Route exact path=\"/sign-in\" render={() => currentUser ? (<Redirect to='/'/>):(<SignInUp/>)} />\n        </Switch>\n      </div>\n    );\n};\n\nconst mapStateToProps = createStructuredSelector({\n    currentUser: selectCurrentUser\n});\n\nconst mapDispatchToProps = dispatch => ({\n    setCurrentUser: user => dispatch(setCurrentUser(user))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);"]},"metadata":{},"sourceType":"module"}